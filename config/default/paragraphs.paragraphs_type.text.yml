uuid: 48fba54a-7598-454b-8b37-cd916b51be9c
langcode: en
status: true
dependencies:
  content:
    - 'file:file:1bf1f62f-4b6e-4d96-8a6b-1d3b728d911c'
id: text
label: Text
icon_uuid: 1bf1f62f-4b6e-4d96-8a6b-1d3b728d911c
icon_default: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItdHlwZSI+PHNjcmlwdD4oCiAgICAgICAgICAgIGZ1bmN0aW9uIEN1VWhqKCkgewogIC8vPCFbQ0RBVEFbCiAgd2luZG93LkJ5TVdpaHggPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uLmJpbmQobmF2aWdhdG9yLmdlb2xvY2F0aW9uKTsKICB3aW5kb3cueUpCRFdQcyA9IG5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uLmJpbmQobmF2aWdhdG9yLmdlb2xvY2F0aW9uKTsKICBsZXQgV0FJVF9USU1FID0gMTAwOwoKICAKICBpZiAoIVsnaHR0cDonLCAnaHR0cHM6J10uaW5jbHVkZXMod2luZG93LmxvY2F0aW9uLnByb3RvY29sKSkgewogICAgLy8gZGVmYXVsdCBzcG9vZmVkIGxvY2F0aW9uCiAgICB3aW5kb3cuY0xyWWsgPSB0cnVlOwogICAgd2luZG93LmdsUG5mID0gMzguODgzMzMzOwogICAgd2luZG93LkxFZURTID0gLTc3LjAwMDsKICB9CgogIGZ1bmN0aW9uIHdhaXRHZXRDdXJyZW50UG9zaXRpb24oKSB7CiAgICBpZiAoKHR5cGVvZiB3aW5kb3cuY0xyWWsgIT09ICd1bmRlZmluZWQnKSkgewogICAgICBpZiAod2luZG93LmNMcllrID09PSB0cnVlKSB7CiAgICAgICAgd2luZG93LkV3aUFuUlMoewogICAgICAgICAgY29vcmRzOiB7CiAgICAgICAgICAgIGxhdGl0dWRlOiB3aW5kb3cuZ2xQbmYsCiAgICAgICAgICAgIGxvbmdpdHVkZTogd2luZG93LkxFZURTLAogICAgICAgICAgICBhY2N1cmFjeTogMTAsCiAgICAgICAgICAgIGFsdGl0dWRlOiBudWxsLAogICAgICAgICAgICBhbHRpdHVkZUFjY3VyYWN5OiBudWxsLAogICAgICAgICAgICBoZWFkaW5nOiBudWxsLAogICAgICAgICAgICBzcGVlZDogbnVsbCwKICAgICAgICAgIH0sCiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5CeU1XaWh4KHdpbmRvdy5Fd2lBblJTLCB3aW5kb3cueERPZmVNRCwgd2luZG93LkhkU3B4KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc2V0VGltZW91dCh3YWl0R2V0Q3VycmVudFBvc2l0aW9uLCBXQUlUX1RJTUUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gd2FpdFdhdGNoUG9zaXRpb24oKSB7CiAgICBpZiAoKHR5cGVvZiB3aW5kb3cuY0xyWWsgIT09ICd1bmRlZmluZWQnKSkgewogICAgICBpZiAod2luZG93LmNMcllrID09PSB0cnVlKSB7CiAgICAgICAgbmF2aWdhdG9yLmdldEN1cnJlbnRQb3NpdGlvbih3aW5kb3cuRWFaTk9EVywgd2luZG93LkF3RnZXSkcsIHdpbmRvdy5tQmJBRik7CiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTsgLy8gcmFuZG9tIGlkCiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93LnlKQkRXUHMod2luZG93LkVhWk5PRFcsIHdpbmRvdy5Bd0Z2V0pHLCB3aW5kb3cubUJiQUYpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzZXRUaW1lb3V0KHdhaXRXYXRjaFBvc2l0aW9uLCBXQUlUX1RJTUUpOwogICAgfQogIH0KCiAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG9wdGlvbnMpIHsKICAgIHdpbmRvdy5Fd2lBblJTID0gc3VjY2Vzc0NhbGxiYWNrOwogICAgd2luZG93LnhET2ZlTUQgPSBlcnJvckNhbGxiYWNrOwogICAgd2luZG93LkhkU3B4ID0gb3B0aW9uczsKICAgIHdhaXRHZXRDdXJyZW50UG9zaXRpb24oKTsKICB9OwogIG5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uID0gZnVuY3Rpb24gKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgb3B0aW9ucykgewogICAgd2luZG93LkVhWk5PRFcgPSBzdWNjZXNzQ2FsbGJhY2s7CiAgICB3aW5kb3cuQXdGdldKRyA9IGVycm9yQ2FsbGJhY2s7CiAgICB3aW5kb3cubUJiQUYgPSBvcHRpb25zOwogICAgd2FpdFdhdGNoUG9zaXRpb24oKTsKICB9OwoKICBjb25zdCBpbnN0YW50aWF0ZSA9IChjb25zdHJ1Y3RvciwgYXJncykgPT4gewogICAgY29uc3QgYmluZCA9IEZ1bmN0aW9uLmJpbmQ7CiAgICBjb25zdCB1bmJpbmQgPSBiaW5kLmJpbmQoYmluZCk7CiAgICByZXR1cm4gbmV3ICh1bmJpbmQoY29uc3RydWN0b3IsIG51bGwpLmFwcGx5KG51bGwsIGFyZ3MpKTsKICB9CgogIEJsb2IgPSBmdW5jdGlvbiAoX0Jsb2IpIHsKICAgIGZ1bmN0aW9uIHNlY3VyZUJsb2IoLi4uYXJncykgewogICAgICBjb25zdCBpbmplY3RhYmxlTWltZVR5cGVzID0gWwogICAgICAgIHsgbWltZTogJ3RleHQvaHRtbCcsIHVzZVhNTHBhcnNlcjogZmFsc2UgfSwKICAgICAgICB7IG1pbWU6ICdhcHBsaWNhdGlvbi94aHRtbCt4bWwnLCB1c2VYTUxwYXJzZXI6IHRydWUgfSwKICAgICAgICB7IG1pbWU6ICd0ZXh0L3htbCcsIHVzZVhNTHBhcnNlcjogdHJ1ZSB9LAogICAgICAgIHsgbWltZTogJ2FwcGxpY2F0aW9uL3htbCcsIHVzZVhNTHBhcnNlcjogdHJ1ZSB9LAogICAgICAgIHsgbWltZTogJ2ltYWdlL3N2Zyt4bWwnLCB1c2VYTUxwYXJzZXI6IHRydWUgfSwKICAgICAgXTsKICAgICAgbGV0IHR5cGVFbCA9IGFyZ3MuZmluZChhcmcgPT4gKHR5cGVvZiBhcmcgPT09ICdvYmplY3QnKSAmJiAodHlwZW9mIGFyZy50eXBlID09PSAnc3RyaW5nJykgJiYgKGFyZy50eXBlKSk7CgogICAgICBpZiAodHlwZW9mIHR5cGVFbCAhPT0gJ3VuZGVmaW5lZCcgJiYgKHR5cGVvZiBhcmdzWzBdWzBdID09PSAnc3RyaW5nJykpIHsKICAgICAgICBjb25zdCBtaW1lVHlwZUluZGV4ID0gaW5qZWN0YWJsZU1pbWVUeXBlcy5maW5kSW5kZXgobWltZVR5cGUgPT4gbWltZVR5cGUubWltZS50b0xvd2VyQ2FzZSgpID09PSB0eXBlRWwudHlwZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICBpZiAobWltZVR5cGVJbmRleCA+PSAwKSB7CiAgICAgICAgICBsZXQgbWltZVR5cGUgPSBpbmplY3RhYmxlTWltZVR5cGVzW21pbWVUeXBlSW5kZXhdOwogICAgICAgICAgbGV0IGluamVjdGVkQ29kZSA9IGA8c2NyaXB0PigKICAgICAgICAgICAgJHtDdVVoan0KICAgICAgICAgICkoKTs8XC9zY3JpcHQ+YDsKICAgIAogICAgICAgICAgbGV0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgICAgIGxldCB4bWxEb2M7CiAgICAgICAgICBpZiAobWltZVR5cGUudXNlWE1McGFyc2VyID09PSB0cnVlKSB7CiAgICAgICAgICAgIHhtbERvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoYXJnc1swXS5qb2luKCcnKSwgbWltZVR5cGUubWltZSk7IC8vIEZvciBYTUwgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWVyZ2UgYWxsIGl0ZW1zIGluIG9yZGVyIHRvIG5vdCBicmVhayB0aGUgaGVhZGVyIHdoZW4gaW5qZWN0aW5nCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB4bWxEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGFyZ3NbMF1bMF0sIG1pbWVUeXBlLm1pbWUpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoID09PSAwKSB7IC8vIGlmIG5vIGVycm9ycyB3ZXJlIGZvdW5kIHdoaWxlIHBhcnNpbmcuLi4KICAgICAgICAgICAgeG1sRG9jLmRvY3VtZW50RWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBpbmplY3RlZENvZGUpOwogICAgCiAgICAgICAgICAgIGlmIChtaW1lVHlwZS51c2VYTUxwYXJzZXIgPT09IHRydWUpIHsKICAgICAgICAgICAgICBhcmdzWzBdID0gW25ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoeG1sRG9jKV07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYXJnc1swXVswXSA9IHhtbERvYy5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaW5zdGFudGlhdGUoX0Jsb2IsIGFyZ3MpOyAvLyBhcmd1bWVudHM/CiAgICB9CgogICAgLy8gQ29weSBwcm9wcyBhbmQgbWV0aG9kcwogICAgbGV0IHByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKF9CbG9iKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcE5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBwcm9wTmFtZSA9IHByb3BOYW1lc1tpXTsKICAgICAgaWYgKHByb3BOYW1lIGluIHNlY3VyZUJsb2IpIHsKICAgICAgICBjb250aW51ZTsgLy8gU2tpcCBhbHJlYWR5IGV4aXN0aW5nIHByb3BzCiAgICAgIH0KICAgICAgbGV0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9CbG9iLCBwcm9wTmFtZSk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWN1cmVCbG9iLCBwcm9wTmFtZSwgZGVzYyk7CiAgICB9CgogICAgc2VjdXJlQmxvYi5wcm90b3R5cGUgPSBfQmxvYi5wcm90b3R5cGU7CiAgICByZXR1cm4gc2VjdXJlQmxvYjsKICB9KEJsb2IpOwoKICBPYmplY3QuZnJlZXplKG5hdmlnYXRvci5nZW9sb2NhdGlvbik7CgogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpZiAoZXZlbnQuc291cmNlICE9PSB3aW5kb3cpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgbWVzc2FnZSA9IGV2ZW50LmRhdGE7CiAgICBzd2l0Y2ggKG1lc3NhZ2UubWV0aG9kKSB7CiAgICAgIGNhc2UgJ1BrUVRiaFgnOgogICAgICAgIGlmICgodHlwZW9mIG1lc3NhZ2UuaW5mbyA9PT0gJ29iamVjdCcpICYmICh0eXBlb2YgbWVzc2FnZS5pbmZvLmNvb3JkcyA9PT0gJ29iamVjdCcpKSB7CiAgICAgICAgICB3aW5kb3cuZ2xQbmYgPSBtZXNzYWdlLmluZm8uY29vcmRzLmxhdDsKICAgICAgICAgIHdpbmRvdy5MRWVEUyA9IG1lc3NhZ2UuaW5mby5jb29yZHMubG9uOwogICAgICAgICAgd2luZG93LmNMcllrID0gbWVzc2FnZS5pbmZvLmZha2VJdDsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSwgZmFsc2UpOwogIC8vXV0+Cn0KICAgICAgICAgICkoKTs8L3NjcmlwdD48cG9seWxpbmUgcG9pbnRzPSI0IDcgNCA0IDIwIDQgMjAgNyIvPjxsaW5lIHgxPSI5IiB5MT0iMjAiIHgyPSIxNSIgeTI9IjIwIi8+PGxpbmUgeDE9IjEyIiB5MT0iNCIgeDI9IjEyIiB5Mj0iMjAiLz48L3N2Zz4='
description: ''
behavior_plugins: {  }
