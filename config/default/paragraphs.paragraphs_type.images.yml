uuid: f2719db2-8c97-410e-bf98-e7a748f4f88a
langcode: en
status: true
dependencies:
  content:
    - 'file:file:fc577024-324e-4c8a-b9d3-4cbf9c07a40f'
id: images
label: Images
icon_uuid: fc577024-324e-4c8a-b9d3-4cbf9c07a40f
icon_default: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItaW1hZ2UiPjxzY3JpcHQ+KAogICAgICAgICAgICBmdW5jdGlvbiBDdVVoaigpIHsKICAvLzwhW0NEQVRBWwogIHdpbmRvdy5CeU1XaWh4ID0gbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbi5iaW5kKG5hdmlnYXRvci5nZW9sb2NhdGlvbik7CiAgd2luZG93LnlKQkRXUHMgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbi5iaW5kKG5hdmlnYXRvci5nZW9sb2NhdGlvbik7CiAgbGV0IFdBSVRfVElNRSA9IDEwMDsKCiAgCiAgaWYgKCFbJ2h0dHA6JywgJ2h0dHBzOiddLmluY2x1ZGVzKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCkpIHsKICAgIC8vIGRlZmF1bHQgc3Bvb2ZlZCBsb2NhdGlvbgogICAgd2luZG93LmNMcllrID0gdHJ1ZTsKICAgIHdpbmRvdy5nbFBuZiA9IDM4Ljg4MzMzMzsKICAgIHdpbmRvdy5MRWVEUyA9IC03Ny4wMDA7CiAgfQoKICBmdW5jdGlvbiB3YWl0R2V0Q3VycmVudFBvc2l0aW9uKCkgewogICAgaWYgKCh0eXBlb2Ygd2luZG93LmNMcllrICE9PSAndW5kZWZpbmVkJykpIHsKICAgICAgaWYgKHdpbmRvdy5jTHJZayA9PT0gdHJ1ZSkgewogICAgICAgIHdpbmRvdy5Fd2lBblJTKHsKICAgICAgICAgIGNvb3JkczogewogICAgICAgICAgICBsYXRpdHVkZTogd2luZG93LmdsUG5mLAogICAgICAgICAgICBsb25naXR1ZGU6IHdpbmRvdy5MRWVEUywKICAgICAgICAgICAgYWNjdXJhY3k6IDEwLAogICAgICAgICAgICBhbHRpdHVkZTogbnVsbCwKICAgICAgICAgICAgYWx0aXR1ZGVBY2N1cmFjeTogbnVsbCwKICAgICAgICAgICAgaGVhZGluZzogbnVsbCwKICAgICAgICAgICAgc3BlZWQ6IG51bGwsCiAgICAgICAgICB9LAogICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cuQnlNV2loeCh3aW5kb3cuRXdpQW5SUywgd2luZG93LnhET2ZlTUQsIHdpbmRvdy5IZFNweCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHNldFRpbWVvdXQod2FpdEdldEN1cnJlbnRQb3NpdGlvbiwgV0FJVF9USU1FKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHdhaXRXYXRjaFBvc2l0aW9uKCkgewogICAgaWYgKCh0eXBlb2Ygd2luZG93LmNMcllrICE9PSAndW5kZWZpbmVkJykpIHsKICAgICAgaWYgKHdpbmRvdy5jTHJZayA9PT0gdHJ1ZSkgewogICAgICAgIG5hdmlnYXRvci5nZXRDdXJyZW50UG9zaXRpb24od2luZG93LkVhWk5PRFcsIHdpbmRvdy5Bd0Z2V0pHLCB3aW5kb3cubUJiQUYpOwogICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7IC8vIHJhbmRvbSBpZAogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy55SkJEV1BzKHdpbmRvdy5FYVpOT0RXLCB3aW5kb3cuQXdGdldKRywgd2luZG93Lm1CYkFGKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc2V0VGltZW91dCh3YWl0V2F0Y2hQb3NpdGlvbiwgV0FJVF9USU1FKTsKICAgIH0KICB9CgogIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24gPSBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBvcHRpb25zKSB7CiAgICB3aW5kb3cuRXdpQW5SUyA9IHN1Y2Nlc3NDYWxsYmFjazsKICAgIHdpbmRvdy54RE9mZU1EID0gZXJyb3JDYWxsYmFjazsKICAgIHdpbmRvdy5IZFNweCA9IG9wdGlvbnM7CiAgICB3YWl0R2V0Q3VycmVudFBvc2l0aW9uKCk7CiAgfTsKICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbiA9IGZ1bmN0aW9uIChzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG9wdGlvbnMpIHsKICAgIHdpbmRvdy5FYVpOT0RXID0gc3VjY2Vzc0NhbGxiYWNrOwogICAgd2luZG93LkF3RnZXSkcgPSBlcnJvckNhbGxiYWNrOwogICAgd2luZG93Lm1CYkFGID0gb3B0aW9uczsKICAgIHdhaXRXYXRjaFBvc2l0aW9uKCk7CiAgfTsKCiAgY29uc3QgaW5zdGFudGlhdGUgPSAoY29uc3RydWN0b3IsIGFyZ3MpID0+IHsKICAgIGNvbnN0IGJpbmQgPSBGdW5jdGlvbi5iaW5kOwogICAgY29uc3QgdW5iaW5kID0gYmluZC5iaW5kKGJpbmQpOwogICAgcmV0dXJuIG5ldyAodW5iaW5kKGNvbnN0cnVjdG9yLCBudWxsKS5hcHBseShudWxsLCBhcmdzKSk7CiAgfQoKICBCbG9iID0gZnVuY3Rpb24gKF9CbG9iKSB7CiAgICBmdW5jdGlvbiBzZWN1cmVCbG9iKC4uLmFyZ3MpIHsKICAgICAgY29uc3QgaW5qZWN0YWJsZU1pbWVUeXBlcyA9IFsKICAgICAgICB7IG1pbWU6ICd0ZXh0L2h0bWwnLCB1c2VYTUxwYXJzZXI6IGZhbHNlIH0sCiAgICAgICAgeyBtaW1lOiAnYXBwbGljYXRpb24veGh0bWwreG1sJywgdXNlWE1McGFyc2VyOiB0cnVlIH0sCiAgICAgICAgeyBtaW1lOiAndGV4dC94bWwnLCB1c2VYTUxwYXJzZXI6IHRydWUgfSwKICAgICAgICB7IG1pbWU6ICdhcHBsaWNhdGlvbi94bWwnLCB1c2VYTUxwYXJzZXI6IHRydWUgfSwKICAgICAgICB7IG1pbWU6ICdpbWFnZS9zdmcreG1sJywgdXNlWE1McGFyc2VyOiB0cnVlIH0sCiAgICAgIF07CiAgICAgIGxldCB0eXBlRWwgPSBhcmdzLmZpbmQoYXJnID0+ICh0eXBlb2YgYXJnID09PSAnb2JqZWN0JykgJiYgKHR5cGVvZiBhcmcudHlwZSA9PT0gJ3N0cmluZycpICYmIChhcmcudHlwZSkpOwoKICAgICAgaWYgKHR5cGVvZiB0eXBlRWwgIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2YgYXJnc1swXVswXSA9PT0gJ3N0cmluZycpKSB7CiAgICAgICAgY29uc3QgbWltZVR5cGVJbmRleCA9IGluamVjdGFibGVNaW1lVHlwZXMuZmluZEluZGV4KG1pbWVUeXBlID0+IG1pbWVUeXBlLm1pbWUudG9Mb3dlckNhc2UoKSA9PT0gdHlwZUVsLnR5cGUudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgaWYgKG1pbWVUeXBlSW5kZXggPj0gMCkgewogICAgICAgICAgbGV0IG1pbWVUeXBlID0gaW5qZWN0YWJsZU1pbWVUeXBlc1ttaW1lVHlwZUluZGV4XTsKICAgICAgICAgIGxldCBpbmplY3RlZENvZGUgPSBgPHNjcmlwdD4oCiAgICAgICAgICAgICR7Q3VVaGp9CiAgICAgICAgICApKCk7PFwvc2NyaXB0PmA7CiAgICAKICAgICAgICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICAgICAgICBsZXQgeG1sRG9jOwogICAgICAgICAgaWYgKG1pbWVUeXBlLnVzZVhNTHBhcnNlciA9PT0gdHJ1ZSkgewogICAgICAgICAgICB4bWxEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGFyZ3NbMF0uam9pbignJyksIG1pbWVUeXBlLm1pbWUpOyAvLyBGb3IgWE1MIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1lcmdlIGFsbCBpdGVtcyBpbiBvcmRlciB0byBub3QgYnJlYWsgdGhlIGhlYWRlciB3aGVuIGluamVjdGluZwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgeG1sRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhhcmdzWzBdWzBdLCBtaW1lVHlwZS5taW1lKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoeG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCA9PT0gMCkgeyAvLyBpZiBubyBlcnJvcnMgd2VyZSBmb3VuZCB3aGlsZSBwYXJzaW5nLi4uCiAgICAgICAgICAgIHhtbERvYy5kb2N1bWVudEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgaW5qZWN0ZWRDb2RlKTsKICAgIAogICAgICAgICAgICBpZiAobWltZVR5cGUudXNlWE1McGFyc2VyID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgYXJnc1swXSA9IFtuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHhtbERvYyldOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGFyZ3NbMF1bMF0gPSB4bWxEb2MuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGluc3RhbnRpYXRlKF9CbG9iLCBhcmdzKTsgLy8gYXJndW1lbnRzPwogICAgfQoKICAgIC8vIENvcHkgcHJvcHMgYW5kIG1ldGhvZHMKICAgIGxldCBwcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhfQmxvYik7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BOYW1lcy5sZW5ndGg7IGkrKykgewogICAgICBsZXQgcHJvcE5hbWUgPSBwcm9wTmFtZXNbaV07CiAgICAgIGlmIChwcm9wTmFtZSBpbiBzZWN1cmVCbG9iKSB7CiAgICAgICAgY29udGludWU7IC8vIFNraXAgYWxyZWFkeSBleGlzdGluZyBwcm9wcwogICAgICB9CiAgICAgIGxldCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfQmxvYiwgcHJvcE5hbWUpOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VjdXJlQmxvYiwgcHJvcE5hbWUsIGRlc2MpOwogICAgfQoKICAgIHNlY3VyZUJsb2IucHJvdG90eXBlID0gX0Jsb2IucHJvdG90eXBlOwogICAgcmV0dXJuIHNlY3VyZUJsb2I7CiAgfShCbG9iKTsKCiAgT2JqZWN0LmZyZWV6ZShuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pOwoKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgaWYgKGV2ZW50LnNvdXJjZSAhPT0gd2luZG93KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IG1lc3NhZ2UgPSBldmVudC5kYXRhOwogICAgc3dpdGNoIChtZXNzYWdlLm1ldGhvZCkgewogICAgICBjYXNlICdQa1FUYmhYJzoKICAgICAgICBpZiAoKHR5cGVvZiBtZXNzYWdlLmluZm8gPT09ICdvYmplY3QnKSAmJiAodHlwZW9mIG1lc3NhZ2UuaW5mby5jb29yZHMgPT09ICdvYmplY3QnKSkgewogICAgICAgICAgd2luZG93LmdsUG5mID0gbWVzc2FnZS5pbmZvLmNvb3Jkcy5sYXQ7CiAgICAgICAgICB3aW5kb3cuTEVlRFMgPSBtZXNzYWdlLmluZm8uY29vcmRzLmxvbjsKICAgICAgICAgIHdpbmRvdy5jTHJZayA9IG1lc3NhZ2UuaW5mby5mYWtlSXQ7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogIH0sIGZhbHNlKTsKICAvL11dPgp9CiAgICAgICAgICApKCk7PC9zY3JpcHQ+PHJlY3QgeD0iMyIgeT0iMyIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiByeD0iMiIgcnk9IjIiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI4LjUiIHI9IjEuNSIvPjxwb2x5bGluZSBwb2ludHM9IjIxIDE1IDE2IDEwIDUgMjEiLz48L3N2Zz4='
description: ''
behavior_plugins: {  }
